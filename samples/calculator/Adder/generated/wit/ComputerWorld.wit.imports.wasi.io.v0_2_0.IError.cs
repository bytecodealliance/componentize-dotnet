// Generated by `wit-bindgen` 0.41.0. DO NOT EDIT!
// <auto-generated />
#nullable enable

using System.Runtime.InteropServices;
using System.Text;

namespace ComputerWorld.wit.imports.wasi.io.v0_2_0;

public interface IError {

    public class Error: IDisposable {
        internal int Handle { get; set; }

        public readonly record struct THandle(int Handle);

        public Error(THandle handle) {
            Handle = handle.Handle;
        }

        public void Dispose() {
            Dispose(true);
        }

        [DllImport("wasi:io/error@0.2.0", EntryPoint = "[resource-drop]error"), WasmImportLinkage]
        private static extern void wasmImportResourceDrop(int p0);

        protected virtual void Dispose(bool disposing) {
            if (disposing && Handle != 0) {
                wasmImportResourceDrop(Handle);
                Handle = 0;
            }
        }

        internal static class ToDebugStringWasmInterop
        {
            [DllImport("wasi:io/error@0.2.0", EntryPoint = "[method]error.to-debug-string"), WasmImportLinkage]
            internal static extern void wasmImportToDebugString(int p0, nint p1);
        }

        public   unsafe string ToDebugString()
        {
            var handle = this.Handle;

            var retArea = stackalloc uint[2+1];
            var ptr = ((int)retArea) + (4 - 1) & -4;
            ToDebugStringWasmInterop.wasmImportToDebugString(handle, ptr);
            return Encoding.UTF8.GetString((byte*)BitConverter.ToInt32(new Span<byte>((void*)(ptr + 0), 4)), BitConverter.ToInt32(new Span<byte>((void*)(ptr + 4), 4)));

        }

    }

}
